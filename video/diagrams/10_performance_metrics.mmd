%%{init: {'theme':'base', 'themeVariables': { 'fontSize':'14px'}}}%%
graph TB
    subgraph UNCALIBRATED["‚ö†Ô∏è UNCALIBRATED MODEL"]
        U1["Validation Set (10,000 samples)"]
        U2["Accuracy: 89.94%<br/>F1 Score: 74.35%<br/>Precision: 70.23%<br/>Recall: 79.08%"]
        U3["ROC-AUC: 95.20%<br/>PR-AUC: 85.47%"]
        U4["False Positive Rate: 8.17%<br/>False Negative Rate: 20.92%"]
        U5["‚ö†Ô∏è Problem: Uncalibrated probabilities"]
        U1 --> U2 --> U3 --> U4 --> U5
    end
    
    subgraph CALIBRATED["‚ú® ISOTONIC CALIBRATED"]
        C1["Validation Set (10,000 samples)"]
        C2["Accuracy: 96.84% ‚¨ÜÔ∏è<br/>F1 Score: 84.87% ‚¨ÜÔ∏è<br/>Precision: 81.75% ‚¨ÜÔ∏è<br/>Recall: 88.26% ‚¨ÜÔ∏è"]
        C3["ROC-AUC: 96.80% ‚¨ÜÔ∏è<br/>PR-AUC: 92.43% ‚¨ÜÔ∏è"]
        C4["False Positive Rate: 2.20% ‚¨áÔ∏è<br/>False Negative Rate: 11.74% ‚¨áÔ∏è"]
        C5["‚úì Solution: Reliable probabilities"]
        C1 --> C2 --> C3 --> C4 --> C5
    end
    
    UNCALIBRATED --> TRANSFORM["üìà ISOTONIC CALIBRATION<br/>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br/>+6.9pp accuracy<br/>+10.52pp F1 score<br/>+11.52pp precision<br/>+9.18pp recall<br/>-5.97pp FPR<br/>-9.18pp FNR"]
    
    TRANSFORM --> CALIBRATED
    
    subgraph TEST["üß™ TEST SET PERFORMANCE"]
        T1["Test Set (5,000 samples)"]
        T2["Accuracy: 91.52%<br/>F1 Score: 67.19%<br/>Precision: 54.98%<br/>Recall: 86.68%"]
        T3["ROC-AUC: 96.80%<br/>PR-AUC: 79.34%"]
        T4["Inference Time: <100ms<br/>Hardware: CPU-only"]
        T1 --> T2 --> T3 --> T4
    end
    
    CALIBRATED --> TEST
    
    subgraph DEPLOYMENT["üöÄ PRODUCTION METRICS"]
        D1["Model Size: 418MB"]
        D2["Latency: <100ms per text"]
        D3["Throughput: ~1000 texts/min"]
        D4["Cost: $0 (offline capable)"]
        D5["Privacy: 100% local processing"]
        D1 --> D2 --> D3 --> D4 --> D5
    end
    
    TEST --> DEPLOYMENT
    
    style UNCALIBRATED fill:#ffebee,stroke:#c62828,stroke-width:3px
    style CALIBRATED fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px
    style TRANSFORM fill:#fff3e0,stroke:#f57c00,stroke-width:4px
    style TEST fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    style DEPLOYMENT fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px

